# MuAlloy Expansion: New Operators and Second Order Mutants

This expansion to `MuAlloy` allows users to generate the orignal set of mutants, the expanded set of mutants and second order mutants. For each non-equivalent mutant model, `MuAlloy` is able to generate an Alloy instance that kills it.  All mutant killing instances can be encoded as `AUnit`
tests and saved on the disk.  `MuAlloy` can also run mutation testing on any model given some tests.

# Requirements:

* Operating Systems
  - Linux (64 bit)
  - Mac OS (64 bit)

* Dependencies
  - Java 8: Must be installed and accessible from `PATH`.
  - Bash 4.4: Must be installed and accessible from `PATH`.
  - Gradle 4.3.1: Must be installed and accessible from `PATH`.
  - Alloy 6: Must be in the classpath.  `MuAlloy` comes with Alloy6
    under `libs/alloy.jar`.
  - Commons CLI 1.4: Must be in the classpath.  `MuAlloy` comes with
    Commons CLI under `libs/commons-cli-1.4.jar`.

## Generate Mutants

To generate mutants, the Java file to invoke is stored as "MutantGenerator_[Type]" All take the same set of command line inputs: 
-o <arg> -m <arg> [-s <arg>] [-t <arg>]
or
 --model-path <arg> --mutant-dir <arg> [--scope <arg>] [--test-path <arg>]
 * `-o,--model-path`: This argument is required.  Pass the model you
   want to mutate as the argument.
 * `-m,--mutant-dir`: This argument is required.  Pass the directory
   to which you want to save mutants as the argument.  If the
   directory does not exist, a new directory will be created.
 * `-s,--scope`: This argument is optional.  Pass the Alloy scope for
   equivalence checking, which is mainly used to prune equivalent
   mutants.  For each non-equivalent mutant, the scope will also be
   used to generate a run command for the corresponding `AUnit` test
   that kills the mutant.  If the argument is not specified, a default
   value of 3 is used.
 * `-t,--test-path`: This argument is optional.  Pass the path to
   which you want to save mutant killing test suite as the argument.
   If the argument is not specified, no mutant killing test suite will
   be generated.  Note that the generated test suite only contains
   unique test predicates and the corresponding run commands.

The command also reports the number of equivalent mutants,
non-equivalent mutants and unique tests.

## Mutation Testing

To run mutation testing, run "MutationTestingRunner" with the following command line inputs:
 -o <arg> -m <arg> -t <arg>
or use the full argument name
--model-path <arg> --mutant-dir <arg> --test-path <arg>
 * `-o,--model-path`: This argument is required.  Pass the original
   model as the argument.  `MuAlloy` collects the test satisfiability
   result for the original model and then compare it with the test
   result for a mutant model.  If the results are different, then the
   mutant is killed.  Otherwise, it is not.
 * `-m,--mutant-dir`: This argument is required.  Pass the directory
   to which mutants are saved as the argument.  `MuAlloy` collects
   test results for each of the mutant models and checks if it can be
   killed by the test suite or not.
 * `-t,--test-path`: This argument is required.  Pass the test suite
   you want to run as the argument.  `MuAlloy` runs the test suite
   against the original model and mutant models to compute the
   mutation score for the test suite.  Note that the test suite should
   only contain the test predicates and the corresponding run
   commands.

The command also reports whether each mutant is killed by the test
suite or not.  After `MuAlloy` finishes running the test suite against
all mutants, the command reports the mutation score.

## Included Examples

`MuAlloy` provides the unique Alloy4Fun faulty models and all original, new and second order mutants generated by our experiments. 
